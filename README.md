# Домашнее задание к занятию «Микросервисы: принципы»
- Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры. Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.
### Задача 1: API Gateway
- Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.
- Решение должно соответствовать следующим требованиям:
  - маршрутизация запросов к нужному сервису на основе конфигурации,
  - возможность проверки аутентификационной информации в запросах,
  - обеспечение терминации HTTPS.
Обоснуйте свой выбор.
### Ответ: API Gateway – это серверный прокси, который предоставляет интерфейс для клиентов (приложений, устройств, пользователей) для доступа к вашим веб-сервисам или микросервисам. Он выполняет функцию шлюза, контролируя и маршрутизируя запросы от клиентов к соответствующим службам.
- сравним Google API Gateway, Amazon API Gateway и Yandex API Gateway по трем основным критериям: маршрутизация запросов, аутентификация и терминация HTTPS.

1. Маршрутизация запросов:
- Google API Gateway позволяет настраивать маршруты запросов на основе конфигурации. Можно определить, какие ресурсы и методы направлять к соответствующим сервисам.
- Amazon API Gateway предоставляет гибкие механизмы настройки маршрутов, позволяя определять ресурсы и методы API и настраивать их в соответствии с требованиями проекта.
- Yandex API Gateway также обеспечивает гибкую настройку маршрутизации запросов, позволяя определять, какие сервисы обрабатывают определенные запросы.

- Вывод: Все три сервиса обладают схожими возможностями по маршрутизации запросов. Выбор может зависеть от предпочтений поставщика облачных услуг, интеграции с другими сервисами и требований проекта.
2. Проверка аутентификационной информации:
- Google API Gateway предоставляет возможности для проверки аутентификационной информации, включая использование токенов и ключей API.
- Amazon API Gateway поддерживает различные методы аутентификации, включая ключи API, токены и интеграцию с AWS Identity and Access Management (IAM).
- Yandex API Gateway также поддерживает различные методы аутентификации, включая стандартные токены и ключи.

- Вывод: Все три сервиса обеспечивают средства проверки аутентификационной информации, что позволяет выбрать подходящий метод в зависимости от требований безопасности проекта.
3. Обеспечение терминации HTTPS:
- Google API Gateway поддерживает терминацию HTTPS, обеспечивая безопасную передачу данных.
- Amazon API Gateway также предоставляет возможность терминации HTTPS для обеспечения безопасности передачи данных.
- Yandex API Gateway обеспечивает терминацию HTTPS для защиты данных при передаче.

- Вывод: Все три сервиса предоставляют средства терминации HTTPS, что обеспечивает шифрование данных в пути и защиту от возможных атак.
- Выбор между этими сервисами должен зависеть от экосистемы облачных услуг, предпочтений команды разработки, а также конкретных требований проекта.
### Задача 2: Брокер сообщений
- Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.
- Решение должно соответствовать следующим требованиям:
  - поддержка кластеризации для обеспечения надёжности,
  - хранение сообщений на диске в процессе доставки,
  - высокая скорость работы,
  - поддержка различных форматов сообщений,
  - разделение прав доступа к различным потокам сообщений,
  - простота эксплуатации.
Обоснуйте свой выбор.
### Ответ: рассмотрим несколько популярных брокеров сообщений и оценим их возможности в соответствии с представленными требованиями.
| Критерии / Брокер |	Kafka	| RabbitMQ	| Apache ActiveMQ |	Redis |	NATS|
|-------------------|-------|-----------|-----------------|-------|-----|
| Кластеризация     |	Да    |	Да        |	Да              |	Да	  |Да   |
|                   |       |      |    |    |   |
|Хранение на диске	|Да |	Нет (в памяти)|	Да	|Опционально|	Нет (в памяти)|
|-------------------|-------|-----------|-----------------|-------|-----|
|Высокая скорость |	Да |	Да |	Да |	Да |	Да |
|Поддержка форматов |	Разные (JSON,|	Разные (JSON,|	Разные (XML,|	Разные (JSON,|	Разные (JSON,|
|	            |Avro, Protobuf)|	XML, Protobuf)|	JSON, XML, |	MessagePack,|	Protocol Buffers|
|		|	Protobuf)|	MsgPack, JSON |            |                |         |	
|Разделение прав |	Нет (обычно |	  Да|	          Да|	    Нет (обычно|	    Да|
|       	|используется|		|	                   |используется|     |                 |	
|      	         |ACL внешней |		|             |	ACL внешней|     |       |    	
|       	|системы) |		|	|     системы) |                |       |	
|Простота	|Средняя |	Высокая|	Средняя|	Высокая|	Высокая|

### Обоснование:
- Выбор Kafka:
  -Кластеризация: Kafka отлично масштабируется и поддерживает кластеризацию.
  - Хранение на диске: Kafka хранит сообщения на диске, обеспечивая устойчивость данных.
  - Высокая скорость: Kafka известна своей высокой производительностью и скоростью.
  - Поддержка форматов: Поддерживает различные форматы сообщений, включая JSON, Avro, и Protobuf.
  - Разделение прав: Хотя у Kafka нет встроенных механизмов управления доступом, многие организации решают эту проблему, используя сторонние средства или настройки ACL.
  - Простота: Использование Kafka может потребовать более сложной настройки, но его функциональность и производительность могут оправдать это.
-ВЫбор RabbitMQ:
  - RabbitMQ обладает хорошей поддержкой кластеризации, высокой скоростью, простотой эксплуатации и отличной поддержкой различных форматов сообщений. Он также имеет гибкие механизмы разделения прав доступа.
Выбор между Kafka и RabbitMQ будет зависеть от конкретных требований проекта, таких как сценарии использования, требования по надежности и обработки сообщений.
Оба брокера могут быть успешно использованы в большинстве сценариев, и выбор часто зависит от предпочтений команды, опыта, требований к производительности и структуры данных.


